(this["webpackJsonpreactwarriors-movie-app"]=this["webpackJsonpreactwarriors-movie-app"]||[]).push([[0],{113:function(e,t,a){},114:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchAuth",(function(){return O})),a.d(n,"fetchFavorites",(function(){return _})),a.d(n,"updateFavorites",(function(){return N})),a.d(n,"fetchWatchlist",(function(){return C})),a.d(n,"updateWatchlist",(function(){return w})),a.d(n,"onLogOut",(function(){return k})),a.d(n,"toggleModal",(function(){return S}));var r=a(0),s=a.n(r),o=a(24),c=a.n(o),i=a(4),l=a(5),u=a(6),m=a(7),d=a(36),p=a(19),h=a(15),v=a(37),g=a.n(v),b="https://api.themoviedb.org/3",f="3f4ca4f3a9750da53450646ced312397",E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(a,n){fetch(e,t).then((function(e){if(e.status<400)return e.json();throw e})).then((function(e){a(e)})).catch((function(e){e.json().then((function(e){n(e)}))}))}))},y=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,null,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=Object(h.a)({api_key:f,language:"ru-Ru"},n);return E("".concat(b).concat(e,"?").concat(g.a.stringify(r)),{mode:"cors",headers:{"Content-type":"application/json"}})}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.params,n=void 0===a?{}:a,r=t.body,s=void 0===r?{}:r,o=Object(h.a)({api_key:f,language:"ru-Ru"},n);return E("".concat(b).concat(e,"?").concat(g.a.stringify(o)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(s)})}},{key:"delete",value:function(e,t){var a=t.params,n=void 0===a?{}:a,r=t.body,s=void 0===r?{}:r,o=Object(h.a)({api_key:f,language:"ru-Ru"},n);return E("".concat(b).concat(e,"?").concat(g.a.stringify(o)),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(s)})}}]),e}(),O=function(e){return function(t){t({type:"FETCH_REQUEST_AUTH"}),y.get("/account",{params:{session_id:e}}).then((function(a){t(j({user:a,session_id:e})),t(_({user:a,session_id:e})),t(C({user:a,session_id:e}))})).catch((function(e){t({type:"FETCH_ERROR_AUTH",payload:e})}))}},j=function(e){return{type:"FETCH_SUCCESS_AUTH",payload:{user:e.user,session_id:e.session_id}}},_=function(e){var t=e.user,a=e.session_id;return function(e){y.get("/account/".concat(t.id,"/favorite/movies"),{params:{session_id:a}}).then((function(t){e(N(t.results))}))}},N=function(e){return{type:"UPDATE_FAVORITES",payload:e}},C=function(e){var t=e.user,a=e.session_id;return function(e){y.get("/account/".concat(t.id,"/watchlist/movies"),{params:{session_id:a}}).then((function(t){e(w(t.results))}))}},w=function(e){return{type:"UPDATE_WATCHLIST",payload:e}},k=function(){return{type:"LOGOUT"}},S=function(){return{type:"TOGGLE_MODAL_LOGIN"}},F=function(e){return{auth:e.auth}},A=function(e){return{authActions:Object(p.bindActionCreators)(n,e)}},T=function(e){return Object(d.b)(F,A)(function(t){Object(m.a)(n,t);var a=Object(u.a)(n);function n(){return Object(i.a)(this,n),a.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return s.a.createElement(e,this.props)}}]),n}(s.a.Component))},M=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.authActions;return s.a.createElement("div",null,s.a.createElement("button",{className:"btn btn-success",type:"button",onClick:e.toggleModal},"Login"))}}]),a}(s.a.Component)),L=a(126),P=a(134),x=a(135),D=a(127),I=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={dropdownOpen:!1},e.toggleDropdown=function(){e.setState((function(e){return{dropdownOpen:!e.dropdownOpen}}))},e.handleLogOut=function(){var t=e.props,a=t.auth,n=t.authActions;y.delete("/authentication/session",{body:{session_id:a.session_id}}).then((function(){n.onLogOut()}))},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.auth;return s.a.createElement(L.a,{isOpen:this.state.dropdownOpen,toggle:this.toggleDropdown},s.a.createElement(P.a,{tag:"div",onClick:this.toggleDropdown,"data-toggle":"dropdown","aria-expanded":this.state.dropdownOpen},s.a.createElement("img",{width:"40",className:"rounded-circle",src:"https://secure.gravatar.com/avatar/".concat(e.user.avatar.gravatar.hash,".jpg?s=64"),alt:"avatar",onClick:this.toggleDropdown})),s.a.createElement(x.a,{right:!0},s.a.createElement(D.a,{onClick:this.handleLogOut},"\u0412\u044b\u0439\u0442\u0438")))}}]),a}(r.Component)),U=a(18),R=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.auth;return s.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},s.a.createElement("div",{className:"container"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item active"},s.a.createElement(U.b,{className:"nav-link",to:"/"},"Home"))),e.user?s.a.createElement(I,null):s.a.createElement(M,null)))}}]),a}(s.a.Component)),G=a(133),H=a(128),W=a(22),B=a(9),q=a.n(B),J=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",repeatpassword:"",errors:{},submitting:!1},e.onChange=function(t){var a=t.target.name,n=t.target.value;e.setState((function(e){var t;return t={},Object(W.a)(t,a,n),Object(W.a)(t,"errors",Object(h.a)({},e.errors,Object(W.a)({base:null},a,null))),t}))},e.handleBlur=function(t){var a=t.target.name,n=e.validateFields()[a];n&&e.setState((function(e){return{errors:Object(h.a)({},e.errors,Object(W.a)({},a,n))}}))},e.validateFields=function(){var t={};return""===e.state.username&&(t.username="Not empty"),e.state.password.length<5&&(t.password="Required! Must be 5 characters or more"),e.state.repeatpassword!==e.state.password&&(t.repeatpassword="Must be equal password"),t},e.onSubmit=function(){var t=null;e.setState({submitting:!0}),y.get("/authentication/token/new").then((function(t){return y.post("/authentication/token/validate_with_login",{body:{username:e.state.username,password:e.state.password,request_token:t.request_token}})})).then((function(e){return y.post("/authentication/session/new",{body:{request_token:e.request_token}})})).then((function(a){t=a.session_id,e.setState({submitting:!1},(function(){e.props.authActions.fetchAuth(t),e.props.authActions.toggleModal()}))})).catch((function(t){e.setState({submitting:!1,errors:{base:t.status_message}})}))},e.onLogin=function(t){t.preventDefault();var a=e.validateFields();Object.keys(a).length>0?e.setState((function(e){return{errors:Object(h.a)({},e.errors,{},a)}})):e.onSubmit()},e.getClassInput=function(t){return q()("form-control",{"is-invalid":e.state.errors[t]})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.password,n=e.repeatpassword,r=e.errors,o=e.submitting;return s.a.createElement("div",{className:"form-login-container"},s.a.createElement("form",{className:"form-login"},s.a.createElement("h1",{className:"h3 mb-3 font-weight-normal text-center"},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"username"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"),s.a.createElement("input",{type:"text",className:this.getClassInput("username"),id:"username",placeholder:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",name:"username",value:t,onChange:this.onChange,onBlur:this.handleBlur}),r.username&&s.a.createElement("div",{className:"invalid-feedback"},r.username)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"\u041f\u0430\u0440\u043e\u043b\u044c"),s.a.createElement("input",{type:"password",className:this.getClassInput("password"),id:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:a,onChange:this.onChange,onBlur:this.handleBlur}),r.password&&s.a.createElement("div",{className:"invalid-feedback"},r.password)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"),s.a.createElement("input",{type:"password",className:this.getClassInput("repeatpassword"),id:"repeatpassword",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"repeatpassword",value:n,onChange:this.onChange,onBlur:this.handleBlur}),r.repeatpassword&&s.a.createElement("div",{className:"invalid-feedback"},r.repeatpassword)),s.a.createElement("button",{type:"submit",className:"btn btn-lg btn-primary btn-block",onClick:this.onLogin,disabled:o},"\u0412\u0445\u043e\u0434"),r.base&&s.a.createElement("div",{className:"invalid-feedback text-center"},r.base)))}}]),a}(s.a.Component)),V=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.auth,a=e.authActions;return s.a.createElement(G.a,{isOpen:t.showLoginModal,toggle:a.toggleModal},s.a.createElement(H.a,null,s.a.createElement(J,null)))}}]),a}(s.a.Component)),$=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.sort_by,a=e.onChangeFilters,n=e.options,r=e.years,o=e.primary_release_year;return s.a.createElement("div",{className:"form-group mb-1"},s.a.createElement("label",{htmlFor:"sort_by"},"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e:"),s.a.createElement("select",{id:"sort_by",name:"sort_by",className:"form-control my-2",value:t,onChange:a},n.map((function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.label)}))),s.a.createElement("select",{id:"primary_release_year",name:"primary_release_year",className:"form-control my-2",value:o,onChange:a},r.map((function(e){return s.a.createElement("option",{key:e.value,value:e.value},e.label)}))))}}]),a}(r.Component);$.defaultProps={options:[{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"popularity.desc"},{label:"\u041f\u043e\u043f\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"popularity.asc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0443\u0431\u044b\u0432\u0430\u043d\u0438\u044e",value:"vote_average.desc"},{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043f\u043e \u0432\u043e\u0437\u0440\u043e\u0441\u0442\u0430\u043d\u0438\u044e",value:"vote_average.asc"}],years:function(){for(var e=[{label:"\u041f\u043e \u0433\u043e\u0434\u0443",value:"primary_release_year"}],t=2025;t>1949;t-=1)e.push({label:t,value:t});return e}()};var Q=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.checked,n=e.onChange;return s.a.createElement("div",null,s.a.createElement("input",{className:"form-check-input",type:"checkbox",id:t.id,value:t.id,name:t.name,onChange:n,checked:a}),s.a.createElement("label",{className:"form-check-label",htmlFor:t.id},t.name))}}]),a}(s.a.Component),z=a(64),K=function(e){var t=e.genres,a=e.with_genres,n=e.onChangeGenres;return s.a.createElement("div",{className:"form-group mb-1"},s.a.createElement("div",{className:"form-check"},t.map((function(e){return s.a.createElement("div",{key:e.id},s.a.createElement(Q,{item:e,checked:a.includes(e.id.toString()),onChange:n}))}))))};K.defaultProps={genres:[],with_genres:[]};var X,Y=(X=K,function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getGenres=function(){y.get("/genre/movie/list",{params:{language:"ru-RU"}}).then((function(e){n.setState({genres:e.genres})}))},n.onChangeGenres=function(e){var t=n.props,a=t.onChangeFilters,r=t.with_genres,s=e.target,o=s.value;a({target:{name:"with_genres",value:s.checked?[o].concat(Object(z.a)(r)):r.filter((function(e){return e!==o}))}})},n.state={genres:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getGenres()}},{key:"render",value:function(){var e=this.state.genres,t=this.props.with_genres;return s.a.createElement("div",{className:"form-group mb-1"},s.a.createElement("div",{className:"mb-2"},"\u0416\u0430\u043d\u0440\u044b:"),s.a.createElement("div",{className:"form-check"},s.a.createElement(X,{genres:e,with_genres:t,onChangeGenres:this.onChangeGenres})))}}]),a}(s.a.Component)),Z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handelClick=function(t){return function(){e.props.onChangePage(t)}},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.page,a=e.total_pages;return s.a.createElement("div",{className:"btn-group mx-auto mb-1"},s.a.createElement("button",{type:"button",className:"btn btn-light",disabled:1===t,onClick:this.handelClick(t-1)},"\u041d\u0430\u0437\u0430\u0434"),s.a.createElement("div",{className:"d-flex align-items-center mx-2"},t," \u0438\u0437 ",a),s.a.createElement("button",{type:"button",className:"btn btn-light",disabled:t===a,onClick:this.handelClick(t+1)},"\u0412\u043f\u0435\u0440\u0435\u0434"))}}]),a}(s.a.Component),ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filters,a=t.sort_by,n=t.primary_release_year,r=t.with_genres,o=e.onChangeFilters,c=e.onResetFilters,i=e.page,l=e.total_pages,u=e.onChangePage;return s.a.createElement("form",null,s.a.createElement("button",{type:"button",className:"btn btn-primary my-1",onClick:c},"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c"),s.a.createElement($,{sort_by:a,primary_release_year:n,onResetFilters:c,onChangeFilters:o}),s.a.createElement(Y,{onChangeFilters:o,with_genres:r}),s.a.createElement(Z,{page:i,total_pages:l,onChangePage:u}))}}]),a}(s.a.PureComponent),te=a(129),ae=a(130),ne=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).changeFavorite=function(){var t=e.props.auth,a=t.user,n=t.session_id,r=e.props,s=r.authActions,o=r.movieId;a?(e.setState({loading:!0}),y.post("/account/".concat(a.id,"/favorite"),{params:{session_id:n},body:{media_type:"movie",media_id:o,favorite:!e.isFavorite()}}).then((function(){return s.fetchFavorites({user:a,session_id:n})})).then((function(){e.setState({loading:!1})}))):s.toggleModal()},e.isFavorite=function(){return e.props.auth.favorites.some((function(t){return t.id===e.props.movieId}))},e.state={loading:!1},e}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("span",{className:q()({"icon-disabled":this.state.loading})},this.isFavorite()?s.a.createElement(te.a,{onClick:this.changeFavorite}):s.a.createElement(ae.a,{onClick:this.changeFavorite}))}}]),a}(s.a.Component)),re=a(131),se=a(132),oe=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).changeWatchlist=function(){var t=e.props.auth,a=t.user,n=t.session_id,r=e.props,s=r.authActions,o=r.movieId;a?(e.setState({loading:!0}),y.post("/account/".concat(a.id,"/watchlist"),{params:{session_id:n},body:{media_type:"movie",media_id:o,watchlist:!e.isWatchlist()}}).then((function(){return s.fetchWatchlist({user:a,session_id:n})})).then((function(){e.setState({loading:!1})}))):s.toggleModal()},e.isWatchlist=function(){return e.props.auth.watchlist.some((function(t){return t.id===e.props.movieId}))},e.state={loading:!1},e}return Object(l.a)(a,[{key:"render",value:function(){return s.a.createElement("span",{className:q()({"icon-disabled":this.state.loading})},this.isWatchlist()?s.a.createElement(re.a,{onClick:this.changeWatchlist}):s.a.createElement(se.a,{onClick:this.changeWatchlist}))}}]),a}(s.a.Component)),ce=function(e){var t=e.src,a=e.alt,n=e.className;return s.a.createElement("img",{src:t,alt:a,className:n})},ie=function(e){var t=e.item;return s.a.createElement("div",{className:"card",style:{width:"100%"}},s.a.createElement(ce,{className:"card-img-top card-img--height",src:"https://image.tmdb.org/t/p/w500".concat(t.backdrop_path||t.poster_path),alt:""}),s.a.createElement("div",{className:"card-body"},s.a.createElement(U.b,{to:"/movie/".concat(t.id),className:"card-title"},t.title),s.a.createElement("div",{className:"d-flex justify-content-between"},s.a.createElement("div",{className:"card-text"},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433: ",t.vote_average),s.a.createElement("div",null,s.a.createElement(ne,{movieId:t.id}),s.a.createElement(oe,{movieId:t.id})))))},le=function(){return s.a.createElement("div",{className:"loader"})},ue=function(e){var t=e.movies;return s.a.createElement("div",{className:"row"},t.length?t.map((function(e){return s.a.createElement("div",{key:e.id,className:"col-6 mb-4"},s.a.createElement(ie,{item:e}))})):s.a.createElement("div",{className:"mx-auto mt-4",key:"notFounded"},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"))};ue.defaultProps={movies:[]};var me=function(e){return function(t){Object(m.a)(n,t);var a=Object(u.a)(n);function n(e){var t;return Object(i.a)(this,n),(t=a.call(this,e)).getMovies=function(e,a){t.setState({loading:!0});var n=e.sort_by,r=e.primary_release_year,s=e.with_genres,o={sort_by:n,page:a,primary_release_year:r};s.length>0&&(o.with_genres=s.join(",")),y.get("/discover/movie",{params:o}).then((function(e){t.setState({movies:e.results,loading:!1}),t.props.onChangeTotalPages(e.total_pages)}))},t.state={movies:[],loading:!1},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getMovies(this.props.filters,this.props.page)}},{key:"componentDidUpdate",value:function(e){this.props.filters!==e.filters&&(this.props.onChangePage(1),this.getMovies(this.props.filters,1)),this.props.page!==e.page&&this.getMovies(this.props.filters,this.props.page)}},{key:"render",value:function(){var t=this.state,a=t.movies;return t.loading?s.a.createElement(le,null):s.a.createElement(e,Object.assign({movies:a},this.props))}}]),n}(s.a.Component)}(ue),de={sort_by:"popularity.desc",primary_release_year:"primary_release_year",with_genres:[]},pe=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChangeFilters=function(e){var t=e.target.value,a=e.target.name;n.setState((function(e){return{filters:Object(h.a)({},e.filters,Object(W.a)({},a,t))}}))},n.onChangePage=function(e){n.setState({page:e})},n.onChangeTotalPages=function(e){n.setState({total_pages:e})},n.onResetFilters=function(){n.setState({filters:de,page:1})},n.state={filters:de,page:1,total_pages:1},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.filters,a=e.page,n=e.total_pages,r=this.props,o=r.auth,c=r.authActions;return s.a.createElement("div",{className:"container pt-1"},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-4"},s.a.createElement("div",{className:"card sticky-top"},s.a.createElement("div",{className:"card-body py-1"},s.a.createElement("h3",null,"\u0424\u0438\u043b\u044c\u0442\u0440\u044b:"),s.a.createElement(ee,{filters:t,page:a,total_pages:n,onChangeFilters:this.onChangeFilters,onChangePage:this.onChangePage,onResetFilters:this.onResetFilters})))),s.a.createElement("div",{className:"col-8"},s.a.createElement(me,{filters:t,page:a,session_id:o.session_id,onChangePage:this.onChangePage,onChangeTotalPages:this.onChangeTotalPages,toggleModal:c.toggleModal}))))}}]),a}(s.a.Component)),he=a(14),ve=Object(he.g)((function(e){var t=e.match.params.id;return s.a.createElement(he.b,null,s.a.createElement("ul",{className:"nav nav-tabs"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(U.c,{activeClassName:"active",className:"nav-link",to:"/movie/".concat(t,"/detail")},"\u041e \u0444\u0438\u043b\u044c\u043c\u0435")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(U.c,{activeClassName:"active",className:"nav-link",to:"/movie/".concat(t,"/videos")},"\u0412\u0438\u0434\u0435\u043e")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(U.c,{activeClassName:"active",className:"nav-link",to:"/movie/".concat(t,"/credits")},"\u0410\u043a\u0442\u0451\u0440\u044b"))))})),ge=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.movie;return s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement(ce,{src:"https://image.tmdb.org/t/p/w300".concat(e.backdrop_path||e.poster_path),alt:"poster",className:"rounded"})),s.a.createElement("div",{className:"col-md-8"},s.a.createElement("div",{className:"card-body pt-0"},s.a.createElement("h3",{className:"card-title mb-1"},e.title),s.a.createElement("h6",{className:"text-muted"},e.original_title),e.tagline?s.a.createElement("small",{className:"text-muted"},"\u0421\u043b\u043e\u0433\u0430\u043d: ",e.tagline):null,s.a.createElement("div",{className:"row justify-content-between mt-4"},s.a.createElement("div",{className:"col-3"},s.a.createElement("h6",null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),s.a.createElement("p",null,e.vote_average)),s.a.createElement("div",{className:"col-3"},s.a.createElement("h6",null,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),s.a.createElement(ne,{movieId:e.id}),s.a.createElement(oe,{movieId:e.id}))),s.a.createElement("div",{className:"mt-4"},s.a.createElement("h6",null,"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"),s.a.createElement("p",null,e.overview)))))}}]),a}(s.a.Component),be=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.movie;return s.a.createElement("div",{className:"mx-auto"},s.a.createElement("table",{className:"table table-bordered mt-4"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),s.a.createElement("td",null,e.status)),s.a.createElement("tr",null,s.a.createElement("th",null,"\u0414\u0430\u0442\u0430 \u0440\u0435\u043b\u0438\u0437\u0430"),s.a.createElement("td",null,e.release_date)),s.a.createElement("tr",null,s.a.createElement("th",null,"\u0421\u0442\u0440\u0430\u043d\u0430"),s.a.createElement("td",null,e.production_countries.map((function(e){return e.name})).join(", "))),s.a.createElement("tr",null,s.a.createElement("th",null,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),s.a.createElement("td",null,e.runtime," \u043c\u0438\u043d.")),s.a.createElement("tr",null,s.a.createElement("th",null,"\u042f\u0437\u044b\u043a \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u0430"),s.a.createElement("td",null,e.original_language)),s.a.createElement("tr",null,s.a.createElement("th",null,"\u0411\u044e\u0434\u0436\u0435\u0442"),s.a.createElement("td",null,"$",e.budget)),s.a.createElement("tr",null,s.a.createElement("th",null,"\u0421\u0431\u043e\u0440\u044b"),s.a.createElement("td",null,"$",e.revenue)),s.a.createElement("tr",null,s.a.createElement("th",null,"\u041f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438"),s.a.createElement("td",null,e.production_companies.map((function(e){return e.name})).join(", "))),s.a.createElement("tr",null,s.a.createElement("th",null,"\u0416\u0430\u043d\u0440\u044b"),s.a.createElement("td",null,e.genres.map((function(e){return e.name})).join(", "))))))}}]),a}(s.a.Component),fe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.video;return s.a.createElement("div",{className:"pt-4 mx-auto w-75"},s.a.createElement("h5",{className:"mb-4"},e.name),s.a.createElement("div",{className:"embed-responsive embed-responsive-16by9"},s.a.createElement("iframe",{width:"640",height:"360",title:e.name,className:"embed-responsive-item",src:"http://www.youtube.com/embed/".concat(e.key)})))}}]),a}(s.a.Component),Ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getVideos=function(){n.setState({loading:!0}),y.get("/movie/".concat(n.props.match.params.id,"/videos")).then((function(e){n.setState({videos:e.results,loading:!1})}))},n.state={videos:[],loading:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getVideos()}},{key:"render",value:function(){var e=this.state,t=e.videos;return e.loading?s.a.createElement(le,null):s.a.createElement("div",{className:"container mx-auto"},t.map((function(e){return s.a.createElement("div",{className:"mb-4",key:e.key},s.a.createElement(fe,{video:e}))})))}}]),a}(s.a.Component),ye=Object(he.g)(Ee),Oe=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.actor;return s.a.createElement("div",{className:"card mt-4"},s.a.createElement(ce,{className:"card-img-top card-img--height",src:"https://image.tmdb.org/t/p/w500".concat(e.profile_path),alt:"actor"}),s.a.createElement("div",{className:"card-body p-2"},s.a.createElement("h6",{className:"card-title mb-1"},e.name),s.a.createElement("small",{className:"text-muted"},e.character)))}}]),a}(s.a.Component),je=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getCredits=function(){n.setState({loading:!0}),y.get("/movie/".concat(n.props.match.params.id,"/credits")).then((function(e){n.setState({cast:e.cast,loading:!1})}))},n.state={cast:[],loading:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getCredits()}},{key:"render",value:function(){var e=this.state,t=e.cast;return e.loading?s.a.createElement(le,null):s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"card-deck mx-auto"},t.map((function(e){return s.a.createElement("div",{key:e.id,className:"col-2 mb-4"},s.a.createElement(Oe,{actor:e}))}))))}}]),a}(s.a.Component),_e=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).getMovie=function(){e.setState({loading:!0}),y.get("/movie/".concat(e.props.match.params.id)).then((function(t){e.setState({movie:t,loading:!1})}))},e.state={movie:null,loading:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.getMovie()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.movie,n=this.props.match.params.id;return t?s.a.createElement(le,null):s.a.createElement("div",{className:"container pt-1"},s.a.createElement("div",{className:"card border-light mb-2"},s.a.createElement(ge,{movie:a})),s.a.createElement("div",{className:"container"},s.a.createElement(ve,null),s.a.createElement("div",null,s.a.createElement(he.d,null,s.a.createElement(he.b,{path:"/movie/:id/detail"},s.a.createElement(be,{movie:a})),s.a.createElement(he.b,{path:"/movie/:id/videos",component:ye}),s.a.createElement(he.b,{path:"/movie/:id/credits",component:je}),s.a.createElement(he.a,{to:"/movie/".concat(n,"/detail")})))))}}]),a}(s.a.Component),Ne=T(function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.auth,a=e.authActions;t.session_id&&a.fetchAuth(t.session_id)}},{key:"render",value:function(){var e=this.props.auth;return s.a.createElement(U.a,{basename:"/reactwarriors-movie-app"},s.a.createElement("div",null,s.a.createElement(R,null),s.a.createElement(he.b,{exact:!0,path:"/",component:pe}),s.a.createElement(he.b,{path:"/movie/:id",component:_e}),e.showLoginModal&&s.a.createElement(V,null)))}}]),a}(s.a.Component)),Ce=(a(112),a(113),new(a(65).a)),we={user:null,session_id:Ce.get("session_id"),showLoginModal:!1,favorites:[],watchlist:[]},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SUCCESS_AUTH":return Object(h.a)({},e,{user:t.payload.user,session_id:t.payload.session_id});case"LOGOUT":return Object(h.a)({},e,{session_id:null,user:null,favorites:[],watchlist:[],showLoginModal:!1});case"TOGGLE_MODAL_LOGIN":return Object(h.a)({},e,{showLoginModal:!e.showLoginModal});case"UPDATE_FAVORITES":return Object(h.a)({},e,{favorites:t.payload});case"UPDATE_WATCHLIST":return Object(h.a)({},e,{watchlist:t.payload});default:return e}},Se=Object(p.combineReducers)({auth:ke}),Fe=a(62),Ae=a(63),Te=Object(p.createStore)(Se,Object(Ae.composeWithDevTools)(Object(p.applyMiddleware)(Fe.a,(function(e){e.dispatch,e.getState;return function(e){return function(t){return"FETCH_SUCCESS_AUTH"===t.type&&Ce.set("session_id",t.payload.session_id,{path:"/",maxAge:2592e3}),"LOGOUT"===t.type&&Ce.remove("session_id"),e(t)}}}))));c.a.render(s.a.createElement(d.a,{store:Te},s.a.createElement(Ne,null)),document.getElementById("root"))},69:function(e,t,a){e.exports=a(114)}},[[69,1,2]]]);
//# sourceMappingURL=main.0b5a25ed.chunk.js.map